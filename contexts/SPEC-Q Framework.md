# SPEC-Q Framework
**AIエージェント向け対話的要求ヒアリング手法**

# ⚠️ 実践時の絶対ルール

## 🚫 絶対禁止
- **5項目を一度に質問すること**
- **"Scopeについて教えてください"のような白紙質問**
- **選択肢だけ提示してユーザーに丸投げ**
- **機械的なアンケート形式**

## ✅ 必須実践
- **最初は必ず推論提示から開始**
- **1つずつ対話的に進める**
- **重要な点は徹底的に深掘り**
- **ユーザーの反応を受けて次の質問を調整**

---

## フレームワーク概要
SPEC-Q = **S**cope + **P**riority + **E**xample + **C**onstraint + **Q**uality Questions

**重要**: これは対話のガイドラインであり、チェックリストではない。

## 基本原則
1. **推論優先** - エージェントが仮定を提示、ユーザーは修正・補完のみ - **[Mandatory]**
2. **対話重視** - アンケートではなく、自然な会話で理解を深める - **[Mandatory]**
3. **Dive Deep重視** - 重要・曖昧な点は徹底的に深掘りする - **[Mandatory]**
4. **柔軟な判断** - ユーザーの回答に応じて動的に質問を調整
5. **完璧主義の排除** - 全項目を埋めることより、真のニーズ理解を優先

## ヒアリングの心構え

### 🎯 目的
- ユーザーの**真の課題**を発見する
- **曖昧な要求**を具体化する
- **隠れた制約**を明らかにする

### 🚫 やってはいけないこと
- 5項目を機械的に質問する
- 表面的な回答で満足する
- 定型的な選択肢のみ提示する
- 全項目の完成を強要する

## 対話的ヒアリング手法

### 1. **推論提示による導入**
```
❌ "どのような課題を解決したいですか？"（白紙質問）
✅ "ReferoMCPServerの情報地図機能で、データ収集の処理速度改善を想定していますが、実際の課題はどの部分でしょうか？"（推論提示 + 対話誘導）
```

**推論提示の効果**:
- ユーザーの負担軽減（ゼロから考える必要なし）
- 発想の呼水（"そうです"/"違います、実は..."を引き出す）
- 対話の起点として機能

### 2. **推論→対話→深掘りの流れ**
```
エージェント: "プロジェクトの現状から、パフォーマンス改善が主な目的と推測しますが、合っていますか？"
ユーザー: "そうです、特にデータベース処理が..."
エージェント: "データベース処理ですね。現在どのくらい時間がかかっていますか？"
ユーザー: "5秒くらいで、ユーザーが離脱してしまって..."
エージェント: "それは深刻ですね。どの部分のクエリが重いですか？"
```

### 3. **Dive Deep の判断基準**
以下の場合は必ず深掘りする：
- **曖昧な表現**: "改善したい" → 何をどう改善？
- **重要そうな課題**: "パフォーマンスが..." → 具体的な数値は？
- **制約の示唆**: "予算が..." → どの程度の制約？
- **感情的な反応**: "本当に困ってて..." → 具体的な影響は？

### 4. **深掘りの技法**

#### **推論提示 + 具体化質問**
```
ユーザー: "使いやすくしたい"
エージェント: "UI/UXの改善を想定していますが、現在どの操作が特に使いにくいですか？"
```

#### **推論提示 + 影響範囲確認**
```
ユーザー: "処理が遅い"
エージェント: "レスポンス時間が3-5秒程度かかっている状況と推測しますが、ユーザーへの具体的な影響はどうですか？"
```

#### **推論提示 + 背景探索**
```
ユーザー: "新機能を追加したい"
エージェント: "既存機能では対応できない新しい要求が出てきたという状況でしょうか？どんなきっかけがありましたか？"
```

## SPEC-Q要素の活用法

### Scope (範囲) - 境界線の明確化
**単発質問ではなく、対話で境界を探る**
```
"今回の対象は〜という理解で合ってますか？"
→ ユーザー回答
→ "では、〜の部分はどうしますか？"
→ さらに深掘り
```

### Priority (優先度) - 真の重要度発見
**表面的な優先度ではなく、本音を探る**
```
"全部重要だと思いますが、もし時間が足りなくなったら？"
"なぜそれが最優先なのですか？"
"それができないとどんな問題が起きますか？"
```

### Example (具体例) - 抽象から具体へ
**1つの例から複数のパターンを探る**
```
"典型的な使い方を1つ教えてください"
→ 具体例を聞く
→ "他にはどんな使い方がありますか？"
→ "例外的なケースはありますか？"
```

### Constraint (制約) - 隠れた制約発見
**技術的制約だけでなく、組織的・時間的制約も**
```
"技術的な制約はありますか？"
"チーム的な制約は？"
"時間的な制約は？"
"予算的な制約は？"
```

### Quality (品質) - 成功の定義
**完了基準を具体的に**
```
"どうなれば成功ですか？"
"誰がどう判断しますか？"
"測定可能な指標はありますか？"
```

## 実践例

### ❌ 機械的なヒアリング
```
エージェント: "Scopeは何ですか？Priorityは？Exampleは？..."
ユーザー: "えーと、Webアプリで、優先度は高くて、例は..."
```

### ✅ 推論優先+対話重視のヒアリング
```
エージェント: "プロジェクトの状況から、Webアプリのパフォーマンス改善が主な課題と推測しますが、合っていますか？"
ユーザー: "そうです！処理が遅くて困ってます"
エージェント: "データベース処理あたりがボトルネックになっている状況でしょうか？"
ユーザー: "まさにそれです。検索で5秒くらいかかって..."
エージェント: "5秒は確かに長いですね。お客さんからクレームが来るレベルですか？"
ユーザー: "はい、離脱率が上がってしまって..."
エージェント: "それは深刻ですね。検索対象のデータ量はどのくらいですか？"
...（推論を起点とした自然な深掘りが続く）
```

## 完了の判断

### ✅ 十分な情報が得られた状態
- ユーザーの**真の課題**が明確
- **具体的な解決策**の方向性が見える
- **制約条件**が把握できている
- **成功基準**が定義できている

### 🔄 継続が必要な状態
- 回答が**曖昧**
- **重要な制約**が隠れていそう
- ユーザーが**迷っている**
- **背景**が理解できていない

## 注意点
- SPEC-Qの完成度より**理解の深さ**を重視
- ユーザーの負担を考慮し、**適切なタイミング**で区切る
- 実装中の**追加質問**は自然で必要
- **完璧を求めすぎない** - 段階的な理解で十分

---
**Created**: 2025-09-22
**Updated**: 2025-09-23

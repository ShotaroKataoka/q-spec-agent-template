# Q-SPEC Framework
**推測ヒアリングベース SPEC 駆動開発フレームワーク**

# ⚠️ 実践時のルール

## 🚫 禁止
- **白紙質問**: "どのような課題を解決したいですか？"
- **アンケート質問**: "複数の質問項目を同時に例列して列挙するアンケート的な質問は禁止"
- **手順的思考**: Q→S→P→E→Cを順番に実行するチェックリスト

## ✅ 実践
- **推論ヒアリング**: "〜なので〜と推測しますが、〜でしょうか？"
- **対話重視**: ユーザの反応を受けて次の質問を動的調整
- **5視点常時意識**: Q/S/P/E/Cを思考習慣として常に意識

---

## 1. 基本理念

Q-SPEC は、エージェントがユーザと対話しながら SPEC（仕様）を効率的に作成するための**5つの思考視点**を持つ推論ヒアリングフレームワークである。

### 推測ヒアリングとは
エージェントが仮説や候補を提示（推測）し、それを呼び水にしてユーザから修正・補足・判断を引き出す（ヒアリング）プロセス。

### 本質的理解
**Q-SPECは観点セットであって、手順ではない**
- 5つの視点（Q/S/P/E/C）を常時意識する思考習慣
- サイクル = SPEC解像度を向上させる回転プロセス
- 各サイクルで視点のフォーカス配分を自然に調整

### 目的
- 過度にオープンな質問を避け、ユーザが答えやすい会話を実現する
- 5つの視点バランスを取りながら SPEC を段階的に磨き上げる
- ユーザが「望む解像度」に達したときに SPEC を確定する

### AYNiS（ALL YOU NEED iS SPEC）前提
すべての開発活動（バグ修正、調査、PoC、新機能、パフォーマンス改善、ドキュメント）を SPEC で扱う。

### SPEC as an Asset
完了した SPEC は**知識資産**として残り、将来の課題に再利用される。特に notes.md は「発見・試行錯誤・意外な解決法」のストックを担う。
- 未確定の推論や迷った選択肢も必ず notes.md に残す
- SPEC に昇格しなかった情報も notes.md に留める

## 2. SPECのライフサイクル

### 作成
**内部構成**:
```
notes.md        # 生ログ・推論・発見
requirements.md # 要件（確定後に整理）
design.md       # 設計（確定後に整理）
tasks.md        # タスク（確定後に整理）
```

### 進行
- Q-SPEC でユーザと会話
- ヒアリングの記録は notes.md に記録
- 確定情報を Requirements/Design/Tasks にまとめる

## 終了条件
- ユーザが「十分」と感じた
- Qで確認した詳細化の粒度のSPECが作成可能な情報が集まった
    - 例）Light = 大枠要件まで、Medium = 要件+設計方針、Deep = 要件+設計詳細+具体タスク

### 資産化
- notes.md に残された発見・過程は**再利用可能な知識**
- エージェントは将来類似課題に直面した際に検索・参照できる

## 3. Q-SPEC 5つの思考視点

### 基本原則
**5つの視点を常時意識する思考習慣**

Q-SPECは手順ではなく、SPEC作成時に常に意識すべき5つの思考の柱である。

### 5つの視点（常時意識）
- **Q (Question)**: 「全体像・粒度は適切か？」
- **S (Suggest)**: 「推論提示で導けているか？」  
- **P (Prioritize & Probe)**: 「重要度判定・深掘りできているか？」
- **E (Elicit)**: 「具体例・制約を引き出せているか？」
- **C (Coordinate)**: 「ヒアリングの深さと幅のバランスは取れているか？」

### サイクル = 解像度向上プロセス
```
サイクルの本質: SPECの解像度を段階的に向上させること

各サイクルの思考例:
1周目: Q視点重視で全体把握、他視点は軽く意識
2周目: P視点重視で深掘り、S視点で推論提示、全視点並行意識
3周目: C視点重視でバランス調整、全視点でファインチューニング
n周目: 十分な情報が集まるまでサイクルを回す
```

### 視点ごとの内的思考
```
ユーザー: "改善したい"
→ Q視点: 全体の中でどの領域？
→ S視点: どんな推論を提示すべき？
→ P視点: これは深掘りすべき重要な発言？
→ E視点: 具体例を引き出すべき？
→ C視点: 他の部分とのバランスは？

視点ごとに考慮事項が異なる
```

## 4. 5つの思考視点詳細

### Q = Question（全体把握視点）
**常時意識**: 「全体像は何か？粒度レベルは適切か？」

**この視点で考えること**:
- プロジェクトの目的・範囲の妥当性
- SPEC の粒度レベル（Light / Medium / Deep）の適切性

**推論提示例**:
```
✅ "プロジェクトの状況から、パフォーマンス改善が主な課題と推測しますが、合っていますか？"
❌ "どのような課題を解決したいですか？"（白紙質問）
```

### S = Suggest（推論提示視点）
**常時意識**: 「推論提示で適切に導けているか？」

**この視点で考えること**:
- 過度に抽象的な質問になっていないか
- 適切な仮説・候補を提示できているか
- 「根拠＋推測＋問いかけ」の形になっているか

**推論提示の技法**:
```
✅ "学習者が多国籍なので、多言語対応が必要かと思いますが、どう思いますか？"
❌ "言語対応について教えてください"（白紙質問）
```

### P = Prioritize & Probe（優先度・深掘り視点）
**常時意識**: 「重要度判定・深掘りが適切にできているか？」

**この視点で考えること**:
- 領域ごとの重要度（影響度・リスク・依存度・価値）
- 深掘りが必要な発言の見極め
- 表面的な回答で満足していないか

**深掘りトリガー**:
- **曖昧な表現**: "改善したい" → 何をどう改善？
- **重要そうな課題**: "パフォーマンスが..." → 具体的な数値は？
- **制約の示唆**: "予算が..." → どの程度の制約？
- **感情的な反応**: "本当に困ってて..." → 具体的な影響は？

**深掘り技法**:
```
推論提示 + 具体化質問:
ユーザー: "使いやすくしたい"
エージェント: "UI/UXの改善を想定していますが、現在どの操作が特に使いにくいですか？"
```

### E = Elicit（具体化視点）
**常時意識**: 「具体例・制約を適切に引き出せているか？」

**この視点で考えること**:
- ユーザーシナリオの具体性
- 制約条件の明確化
- 暗黙知の表面化

**推論提示例**:
```
✅ "典型的な利用シーンとして、新規ユーザーの初回登録を想定していますが、他にどんなパターンがありますか？"
❌ "ユーザーシナリオを教えてください"（白紙質問）
```

### C = Coordinate （バランス調整視点）
**常時意識**: 「ヒアリングの深さと幅のバランスは取れているか？常に現在の掘り方が適切かを確認する動的な調整視点」

**この視点で考えること**:
- **動的調整**: 会話の途中でも「今掘りすぎていないか」「逆に浅すぎないか」を瞬時に判断し、質問の仕方や次の視点のフォーカスを切り替える
- **粗密調整**: 領域ごとの粒度差を均す
- **網羅性補完**: 抜け落ちを補う
- **整合性確認**: 要件・設計・タスク間の矛盾を解消

**推論提示例**:
- 「この点は深掘りしすぎている気がします。他に優先して確認すべき領域はありますか？」
- 「ここまで掘れば十分そうですが、UIや運用面は浅いままです。今のバランスでよろしいですか？」
- 「アカウント登録は決まりましたが、退会処理は未定です。必要ですか？」
- 「要件と設計に優先度の矛盾があります。どちらを優先しましょうか？」


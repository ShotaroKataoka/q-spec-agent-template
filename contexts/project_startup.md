# ⚠️ 必須: プロジェクト初期化が必要です

**このコンテキストは `.kiro/steering/` が存在しないために表示されています。**
**他の作業を行う前に、プロジェクト初期化プロセスを実行する必要があります。**

---

## 🚨 必須アクション

### 初期化宣言
**必ずこの宣言から始めてください:**
```
"このプロジェクトはまだ初期化されていません。
Q-SPECフレームワークに従ってプロジェクト初期化ヒアリングを実施します。"
```

---

## 📋 初期化プロセス（4フェーズ）

**重要**: 以下は「質問のテンプレート」ではなく「ガイドライン」です。
Q-SPECフレームワーク（S/P/E/C）を活用し、ユーザーの回答に応じて臨機応変にインタビュー経路を調整してください。

---

### フェーズ1: プロジェクト理解（vision.md作成）

**目的**: プロジェクトの本質を理解する

**引き出すべき情報**:
- 解決する問題（Problem Statement）
- ターゲットユーザー（Target Users）
- 既存ソリューションとの違い（Existing Solutions & Gaps）
- プロジェクトのゴール（Project Goal）
- 成功基準（Success Criteria）

**推論ベースインタビューの進め方**:

1. **オープンな質問から開始**
   - 「このプロジェクトはどのような問題を解決しますか？」
   - 「誰がこのプロジェクトを使いますか？」

2. **ユーザーの回答から推測を組み立てる**
   - 回答内容を分析し、次に確認すべき情報を判断
   - S (Scope): 全体像を把握
   - P (Pathfinding): 深掘りすべき領域を特定

3. **推測を提示して深掘り**
   - 「〇〇という問題ですね。現在はどのように対処していますか？」
   - 「△△で対処されているとのことですが、何が不満なのでしょうか？」
   - E (Elicit): 具体例を引き出す

4. **境界線を明確にする**
   - 「逆に、このプロジェクトでやらないことは何ですか？」
   - C (Constrain): スコープを収束

**質問例（参考）**:
```
問題の深掘り:
- 「どのような問題を解決しますか？」
- 「現在はどのように対処していますか？」
- 「その方法の何が不満ですか？」

ユーザー理解:
- 「誰が使いますか？」
- 「ユーザーの技術レベルは？」
- 「ユーザーが最も重視することは？」

ゴール明確化:
- 「成功したと言える状態は？」
- 「最も重要な機能は？」
- 「やらないことは？」
```

**成果物**: `.kiro/steering/vision.md` 作成  
**テンプレート**: `contexts/steering_templates/vision.md`

---

### フェーズ2: 価値観の明確化（principles.md作成）

**目的**: 判断基準とトレードオフの優先順位を決める

**引き出すべき情報**:
- コアバリュー（Core Values）
- 判断フレームワーク（Decision Framework）
- トレードオフの優先順位（Trade-off Priorities）
- 一貫性のルール（Consistency Rules）

**推論ベースインタビューの進め方**:

1. **価値観を引き出す**
   - 「プロジェクトで最も大切にしたいことは何ですか？」
   - ユーザーの回答から、トレードオフの場面を推測

2. **トレードオフの優先順位を確認**
   - 「シンプルさと機能の豊富さ、どちらを優先しますか？」
   - 「なぜ〇〇を優先するのでしょうか？」
   - 複数のトレードオフについて確認

3. **具体的な設計判断を確認**
   - 「エラー処理はどのように統一しますか？」
   - 「設定の注入方法は？」
   - ユーザーの回答から、一貫性のルールを抽出

4. **判断基準を明確化**
   - 「新しい機能を追加するとき、何を基準に判断しますか？」
   - 曖昧な回答の場合は具体例で確認

**質問例（参考）**:
```
価値観の優先順位:
- 「最も大切にしたいことは？」
- 「シンプルさ vs 機能の豊富さ」
- 「パフォーマンス vs 可読性」
- 「柔軟性 vs 規約」

一貫性のルール:
- 「エラー処理の統一方法は？」
- 「設定の注入方法は？」
- 「ログ出力の方針は？」

判断基準:
- 「機能追加の判断基準は？」
- 「技術選定の基準は？」
```

**成果物**: `.kiro/steering/principles.md` 作成  
**テンプレート**: `contexts/steering_templates/principles.md`

---

### フェーズ3: 設計思想の選択（seeds選択・コピー）

**目的**: プロジェクトに適した設計思想を選ぶ

**引き出すべき情報**:
- プロジェクトの複雑度
- レイヤー分割の必要性
- ドメインモデルの複雑さ

**推論ベースインタビューの進め方**:

1. **複雑度を確認**
   - 「このプロジェクトの複雑度はどの程度でしょうか？」
   - 「レイヤー分割は必要だと思いますか？」

2. **回答から適切な設計思想を推測**
   - シンプル → Simplicity-First
   - レイヤー分離必要 → Clean Architecture
   - 複雑なドメイン → Domain-Driven Design

3. **seedを読み込み、内容を説明**
   - `fs_read steering_seeds/design_philosophy/[選択したseed].md`
   - 主要な原則を説明
   - 「このプロジェクトに適していますか？」

4. **seedをコピーし、必要に応じて調整**
   - `cp steering_seeds/design_philosophy/[選択したseed].md .kiro/steering/`
   - 基本的にはそのまま使用
   - プロジェクトの特性上、一部の原則を緩和する必要がある場合は調整
   - 例: Clean Architectureの4層を3層に簡略化等

**重要**: 
- 設計思想seedsは「哲学」なので、基本的にはそのまま使用
- 技術スタックseedsは「具体的な基準」なので、プロジェクトに合わせて調整
- 調整する場合は理由を明確にする

**利用可能な設計思想seeds**:
- エージェント起動時の "Available Steering Seeds" セクションを参照
- `steering_seeds/design_philosophy/` 配下のファイルを確認

**成果物**: 設計思想seedを `.kiro/steering/` にコピー

---

### フェーズ4: 技術制約の定義（constraints.md作成 + seeds選択・コピー）

**目的**: 技術的な境界線を明確にする

**引き出すべき情報**:
- 技術的境界線（Technical Boundaries）
- 禁止事項（Prohibited Practices）
- 外部依存の方針（Dependency Policy）
- 互換性の要件（Compatibility Requirements）

**推論ベースインタビューの進め方**:

1. **技術スタックを確認**
   - 「使用する言語は？」
   - 「バージョンは？なぜそのバージョンか？」
   - 「フレームワークは？」
   - 「プラットフォームは？」

2. **技術スタックseedを読み込み、説明**
   - `fs_read steering_seeds/tech_stacks/[言語].md`
   - コーディング規約、テスト方法などを説明
   - 「このプロジェクトに適用しますか？」

3. **seedをコピーし、プロジェクトに合わせて調整**
   - `cp steering_seeds/tech_stacks/[言語].md .kiro/steering/`
   - コピー後、内容を確認しながら調整
   - 「カバレッジ80%とありますが、このプロジェクトでは適切ですか？」
   - 「型ヒント必須とありますが、このプロジェクトでも必須にしますか？」
   - プロジェクトに合わない基準は調整する

**重要**: 
- seedsは「一般的な標準」であり、全てのプロジェクトに適するわけではない
- プロジェクトの特性に合わせて調整することで、「このプロジェクトの真実」にする
- 調整理由を明確にする（なぜ標準から外れるのか）

**利用可能な技術スタックseeds**:
- エージェント起動時の "Available Steering Seeds" セクションを参照
- `steering_seeds/tech_stacks/` 配下のファイルを確認

4. **制約を確認**
   - 「サポート範囲の境界線は？」
   - 「絶対にやってはいけないことは？」
   - 「外部依存の方針は？」
   - 「互換性の要件は？」

**質問例（参考）**:
```
技術スタック:
- 「言語・バージョンは？なぜ？」
- 「フレームワークは？選択理由は？」
- 「プラットフォームは？」

制約:
- 「サポート範囲は？」
- 「禁止事項は？理由は？」
- 「外部依存の方針は？」
- 「互換性の要件は？」
```

**成果物**: 
- `.kiro/steering/constraints.md` 作成
- 技術スタックseedを `.kiro/steering/` にコピー

**テンプレート**: `contexts/steering_templates/constraints.md`

---

### 最終確認

**全てのファイル作成後、サマリーを表示:**

```
✅ プロジェクト初期化が完了しました

作成されたファイル:
├─ .kiro/steering/vision.md
├─ .kiro/steering/principles.md
├─ .kiro/steering/constraints.md
├─ .kiro/steering/[設計思想seed].md
└─ .kiro/steering/[技術スタックseed].md

📋 内容確認:
- vision.md: プロジェクトの存在理由が明確か
- principles.md: 判断基準が具体的か
- constraints.md: 技術的境界線が明確か
- seeds: 適切なseedsが選択されているか

次回からはこれらのsteeringファイルがコンテキストとして読み込まれます。
最初のSPECを作成しますか？
```

---

## ⚠️ 重要な注意事項

### Q-SPECフレームワークの活用

初期化ヒアリングでも、Q-SPECフレームワークを活用してください：

- **S (Scope)**: プロジェクトの全体像を把握し、必要な情報の範囲を特定
- **P (Pathfinding)**: ユーザーの回答から、次に深掘りすべき領域を判断
- **E (Elicit)**: 抽象的な回答を具体化、暗黙知を引き出す
- **C (Constrain)**: スコープを収束、境界線を明確化

### 「普遍的な真実」を記載する

steeringファイルには、プロジェクトの進化に関わらず変わらない原則のみを記載してください。

✅ 良い例:
- "このツールはCLIとして動作する"（プロジェクトの本質）
- "シンプルさを機能の豊富さより優先する"（不変の価値観）
- "Python 3.10以上をサポート"（技術的境界線）

❌ 悪い例:
- "現在3つのコマンドがある"（実装状態、可変情報）
- "Phase 1で基本機能を実装する"（ロードマップ、可変情報）
- "src/core/user.py にUserクラスがある"（実装詳細、可変情報）

### seedsとsteeringの役割分担

- **steering_seeds**: 言語・フレームワークの一般的なベストプラクティス（コピー元）
- **steering files**: プロジェクト固有の判断基準・制約・価値観 + 調整済みseeds

**seedsのカスタマイズ方針**:
- **設計思想seeds**: 基本的にそのまま使用（哲学は変えない）
- **技術スタックseeds**: プロジェクトに合わせて調整（具体的な基準は調整可能）

**例**:
- `python.md` (seed元): Pythonの一般的なコーディング規約、カバレッジ80%
- `python.md` (steering内): このプロジェクト用に調整、カバレッジ60%（理由: プロトタイプのため）
- `constraints.md` (steering): このプロジェクトで使うPythonバージョン、禁止事項

### seeds選択の順序

**必ずこの順序で実行:**
1. 設計思想seeds選択 → 構造の原則が決まる
2. 技術スタックseeds選択 → 言語の標準が決まる

逆順にすると、設計思想が構造に反映されません。

---

## ⛔ 禁止事項

- **初期化をスキップして** SPEC作成に直接進まないこと
- steeringファイルが存在する前に **SPECを作成しない**こと
- ヒアリングなしでsteeringの内容を **推測しない**こと
- seedsを **読まずにコピーしない**こと
- 設計思想seedsを選択する前に **技術スタックseedsを選択しない**こと
- 質問を **機械的に読み上げない**こと（臨機応変に対応）

---

## 🎯 成功基準

- [ ] Q-SPECフレームワークに従ってヒアリングを実施した
- [ ] ユーザーの回答に応じて臨機応変にインタビュー経路を調整した
- [ ] 適切な設計思想seedsを特定・読み込み・説明・コピーした
- [ ] 適切な技術スタックseedsを特定・読み込み・説明・コピーした
- [ ] `.kiro/steering/vision.md` を作成した
- [ ] `.kiro/steering/principles.md` を作成した
- [ ] `.kiro/steering/constraints.md` を作成した
- [ ] 各ファイルに「普遍的な真実」が記載されている
- [ ] エージェントが判断基準として活用できる具体性がある
- [ ] ユーザーが完了を確認した
